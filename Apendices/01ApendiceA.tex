%---------------------------------------------------------------------
%
%                          Apéndice 1
%
%---------------------------------------------------------------------

\chapter{Manual de usuario}

\pagestyle{plain}

%-------------------------------------------------------------------
\section{Requisitos previos}
%-------------------------------------------------------------------

Como ya hemos indicado en las secciones de la memoria, nuestro proyecto actualmente sólo funciona en sistemas operativos LINUX, por tanto en lo siguiente supondremos que se trabaja bajo este sistema operativo.

Por otro lado para poder ejecutar el sistema que hemos desarrollado será necesario cumplir una serie de requisitos software previos. En concreto deberemos tener instalados los siguientes componentes:

\begin{itemize}
\item \textbf{''Java Runtime Environment''} o JRE de 32 bits, versión 1.6 o superior.\\
Para ello desde la propia página recomiendan, en lo relativo a requisitos hardware, contar con un Pentium 2 a 266 MHz o un procesador más rápido con al menos 128 MB de RAM física.\\
Enlace de descarga: 
\url{http://www.java.com/es/download/}
\item \textbf{''Clang''}. Al comienzo del proyecto la última versión disponible era la 3.5, por lo que esta fue la que se utilizó. \\
Para poder compilar nuestra herramienta de generación del AST2XML, cuyos pasos detallados de instalación comentamos en la próxima sección, es necesario tener instalado Clang en nuestro sistema. Puesto que la instalación y requisitos ya están detallados en la propia web de Clang no vamos a detenernos a comentarlos uno a uno.
\begin {itemize}
\item \textbf{''Requisitos LLVM System''}: \\
Enlace de requisitos:
\url{http://llvm.org/docs/GettingStarted.html#requirements}
\item \textbf{''Python''}. Para compilar Clang es necesario tener instalado Python en nuestro sistema. \\
Enlace de descarga:
\url{https://www.python.org/download}
\item \textbf{''Compilacion de Clang''} \\
Enlace con los pasos detallados
\url {http://clang.llvm.org/get_started.html}
\end {itemize} 
\end {itemize}


%-------------------------------------------------------------------
\section{Instalación herramienta ast2xml}
%-------------------------------------------------------------------

Es necesario compilar la herramienta ast2xml en nuestro ordenador para poder utilizarla, puesto que es diferente para cada equipo. En esta sección damos por sentado que el usuario ya ha instalado Clang en su ordenador, a continuación detallamos los pasos para su compilación en nuestro sistema para luego poder utilizarla.

\begin{itemize}
\item Dirigirse a nuestro directorio LLVM. \\
\textbf{cd (directorio llvm)/tools/clang/tools}
\item Clonar el repositorio con nuestra herramienta en una carpeta del directorio.\\
\textbf{git clone \url{https://github.com/Si1314/AST2XML.git} ast2xmltool}
\item Copiar el Makefile.
\item Ir al directorio de compilación.\\
\textbf{cd (directorio de compilación)/tools/clang/tools}
\item Crear un directorio específico para la herramienta (con el mismo nombre).\\
\textbf{mkdir ast2xmltool}
\item Copiar en él el archivo Makefile.
\item Ir dentro del directorio.\\
\textbf{cd ast2xmltool}
\item Ejecutar el comando ``make''\\
La herramienta estará compilada y enlazada si no hay ningún problema
\item Volver al directorio de compilación.\\
\textbf{cd (directorio de compilación)/Debug + Asserts/build}

Aquí debería encontrarse la herramienta, así como el resto de herramientas proporcionadas por el paquete de clang.
\end{itemize}

%-------------------------------------------------------------------
\section{Instalación interfaz de usuario}
%-------------------------------------------------------------------

Para poder utilizar la interfaz de usuario que hemos desarrollado será necesario descargarla desde nuestro repositorio. La interfaz se encuentra en un archivo comprimido con todo el directorio de archivos necesario, incluidos los archivos del intérprete simbólico. 

Para empezar a utilizarlo será necesario descomprimir el archivo comprimido en el directorio que desee el usuario y ejecutar la aplicación.

%-------------------------------------------------------------------
\section{Tutorial de uso}
%-------------------------------------------------------------------

Esta sección la dedicaremos a explicar como usar la herramienta SymC++ a través de su interfaz gráfica.

En primer lugar, cuando la ejecutamos por primera vez, nos dará un aviso para seleccionar donde tenemos instalada nuestra herramienta ast2xml, la cual es necesaria para la ejecución del programa, por tanto se nos mostrará la siguiente imagen como aviso para seleccinar la herramienta (Figura A.1) y seleccionando ``aceptar'' se mostrará la ventana para navegar en busca de ast2xml (Figura A.2). 

Una vez que se abre la interfaz completa se muestra como un editor de texto con las funciones propias (abrir, copiar, guardar, deshacer, etc...). La vista normal de la interfaz se muestra en la figura A.3.

A partir de aquí, podemos tanto escribir nuestra función en el editor de texto, como cargar un archivo C++ y seleccionar la función que queremos testear. En la figura A.4 se muestra una captura con el código ya cargado.

Para lanzar la herramienta de ejecución simbólica, es necesario que el texto a escribir esté guardado. Por tanto, si al seleccionar ``Run'' desde el menú, o pinchar en la tecla de ``play'' desde la barra de herramientas el texto no está guardado pueden ocurrir dos situaciones:
\begin{itemize}
\item Si el texto procede de un archivo se guardará automáticamente en su archivo origen.
\item Si hemos redacatado el texto desde el editor, se abrirá una ventana para guardar el archivo con el nombre y en el directorio que deseemos
\end{itemize}

Una vez guardado el archivo C++ se mostrará una ventana con los valores de entrada necesarios para que nuestro intérprete simbólico sepa de que función de todo el archivo queremos obtener los resultados, y el rango de valores y la profundidad de ejecución de los bucles. En la figura A.5 se muestra la ventana para introducir los valores de entrada.

A continuación la interfaz cargará los resultados generados en la ``Results table'' la cual se muestra en la figura A.6, quedando la vista principal como se muestra en la figura A.7.

Para poder ver los detalles del resultado de la ejecución del intérprete debemos selecccionar el resultado del que queremos ver los detalles haciendo ``doble click'' sobre él, y se cargará la traza de ejecución en su zona de resultados en ``Execution tracking'' como se puede observar en la figura A.8 al mismo tiempo que se resaltará el texto de las líneas por las que ha pasado en la zona del editor como se puede ver en la figura A.9. 

La interfaz tiene dos zonas de resultados más, que también se rellenaran al hacer ``doble click'' si los resultados las usan, son las zonas de la ``Input console'' y ``Output console'' que se pueden observar en la figura A.10. Estas ``consolas'' simulan la consola de entrada propia del compilador, cuando el usuario introduce un número y el número que generaría por la consola de salida.

Por otro lado, se pueden las distintas opciones que se nos presentan desde el menú. En las figuras A.11, A.12, A.13 y A.14 podemos ver todas las opciones que detallamos a continuación.

\begin{itemize}
\item \textbf{File:} En este submenú (figura A.11) se encuentran todas las opciones de archivos: abrir un nuevo archivo, guardar, salir de la aplicación, etc...
\item \textbf{Edit:} En este submenú (figura A.12) se encuentran todas las opciones de edición de texto: copiar, cortar y pegar, hacer y deshacer, etc...
\item \textbf{Run:} En este submenú (figura A.13) se encuentran las opciones de ejecución de la herramienta, la primera opción ``Change params to run'' permite configurar los valores de ejecucion de la función (rango de valores enteros, nombre función y profundidad para recorrer los bucles). La opción ``run project'' procede a la ejecución por parte de nuestro intérprete de la función seleccionada.
\item \textbf{Debug:} En este submenú (figura A.14) se encuentran las opciones de depuración, por un lado, la opción de ver y cambiar donde se encuentra instalada la herramienta ast2xml. Por otro lado, la opción de poder ver los XMLs generados tanto por la herramienta ast2xml como por el intérprete de prolog (figura A.15).
\end{itemize}

%-------------------------------------------------------------------
\subsection*{Capturas de pantalla}
%-------------------------------------------------------------------

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.7\textwidth]%
{Imagenes/Interfaz/selectast2xml}
\caption{Figura con el mensaje de aviso para seleccionar la herramienta ast2xml.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/searchast2xml}
\caption{Figura con el directorio de archivos para buscar la herramienta ast2xml.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/principal}
\caption{Figura con el directorio de archivos para buscar la herramienta ast2xml.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/texto}
\caption{Figura con una función escrita en el editor.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/texto}
\caption{Figura con la ventana para introducir los valores de entrada del intérprete.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/tabla}
\caption{Figura con la vista de la tabla de resultados.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/resultado}
\caption{Figura con la ventana principal de la interfaz con los resultados.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/traza}
\caption{Figura con la vista de la traza de ejecución.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/resultado2}
\caption{Figura con la ventana principal de la interfaz con los resultados y la traza resaltada.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/consolas}
\caption{Figura con la vista de las consolas de entrada y salida.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/file}
\caption{Figura con la vista del submenu ``file''.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/edit}
\caption{Figura con la vista del submenu ``edit''.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/run}
\caption{Figura con la vistal submenu ``run''.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.5\textwidth]%
{Imagenes/Interfaz/debug}
\caption{Figura con la vista del submenu ``debug''.}
\end{center}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=0.9\textwidth]%
{Imagenes/Interfaz/displayxml}
\caption{Figura con la vista del XML generado.}
\end{center}
\end{figure}



% Variable local para emacs, para  que encuentre el fichero maestro de
% compilación y funcionen mejor algunas teclas rápidas de AucTeX
%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:
